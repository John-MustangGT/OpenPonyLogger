<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenPonyLogger</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.rawgit.com/Mikhus/canvas-gauges/gh-pages/download/2.1.7/all/gauge.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üêé OpenPonyLogger</h1>
            <div class="status-indicator">
                <span class="status-dot" id="connectionStatus"></span>
                <span id="connectionText">Connecting...</span>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="tab-button active" data-tab="about">About</button>
            <button class="tab-button" data-tab="status">Status</button>
            <button class="tab-button" data-tab="gauges">Gauges</button>
            <button class="tab-button" data-tab="gforce">G-Force</button>
            <button class="tab-button" data-tab="gps">GPS</button>
            <button class="tab-button" data-tab="sessions">Sessions</button>
            <button class="tab-button" data-tab="config">Config</button>
        </nav>

        <!-- Tab Content -->
        <main class="content">
            <!-- About Tab -->
            <div class="tab-content active" id="about">
                <div class="info-card">
                    <h2>OpenPonyLogger</h2>
                    <p class="version">Version 1.0.0</p>
                    <div class="about-section">
                        <h3>Open-Source Automotive Telemetry System</h3>
                        <p>OpenPonyLogger is a comprehensive data logging solution for your Mustang GT, 
                        designed to record and analyze performance data in real-time.</p>
                        
                        <h3>Features</h3>
                        <ul>
                            <li>Real-time OBD-II data monitoring</li>
                            <li>GPS tracking with satellite visualization</li>
                            <li>3-axis accelerometer for G-force measurement</li>
                            <li>Session recording and playback</li>
                            <li>Low-cost alternative ($33 vs $400-800 commercial units)</li>
                        </ul>

                        <h3>Hardware</h3>
                        <ul>
                            <li>Raspberry Pi Pico 2W</li>
                            <li>GPS Module (UART)</li>
                            <li>MPU6050 Accelerometer (I2C)</li>
                            <li>ELM327 OBD-II Interface</li>
                        </ul>

                        <h3>Project Info</h3>
                        <p><strong>Vehicle:</strong> 2014 Ford Mustang GT "Ciara"</p>
                        <p><strong>Developer:</strong> John Orthoefer</p>
                        <p><strong>License:</strong> Open Source</p>
                    </div>
                </div>
            </div>

            <!-- Status Tab -->
            <div class="tab-content" id="status">
                <div class="status-grid">
                    <div class="status-card">
                        <h3>System Status</h3>
                        <div class="status-row">
                            <span>CPU Temperature:</span>
                            <span id="cpuTemp">--¬∞C</span>
                        </div>
                        <div class="status-row">
                            <span>Memory Used:</span>
                            <span id="memUsed">--</span>
                        </div>
                        <div class="status-row">
                            <span>Uptime:</span>
                            <span id="uptime">--</span>
                        </div>
                        <div class="status-row">
                            <span>WiFi Signal:</span>
                            <span id="wifiSignal">--</span>
                        </div>
                    </div>

                    <div class="status-card">
                        <h3>OBD-II Connection</h3>
                        <div class="status-row">
                            <span>Status:</span>
                            <span id="obdStatus" class="status-badge">Disconnected</span>
                        </div>
                        <div class="status-row">
                            <span>Protocol:</span>
                            <span id="obdProtocol">--</span>
                        </div>
                        <div class="status-row">
                            <span>VIN:</span>
                            <span id="obdVin">--</span>
                        </div>
                        <div class="status-row">
                            <span>Data Rate:</span>
                            <span id="obdDataRate">--</span>
                        </div>
                    </div>

                    <div class="status-card">
                        <h3>GPS Module</h3>
                        <div class="status-row">
                            <span>Status:</span>
                            <span id="gpsStatus" class="status-badge">No Fix</span>
                        </div>
                        <div class="status-row">
                            <span>Satellites:</span>
                            <span id="gpsSats">0</span>
                        </div>
                        <div class="status-row">
                            <span>Fix Quality:</span>
                            <span id="gpsFixQuality">--</span>
                        </div>
                        <div class="status-row">
                            <span>HDOP:</span>
                            <span id="gpsHdop">--</span>
                        </div>
                    </div>

                    <div class="status-card">
                        <h3>Accelerometer</h3>
                        <div class="status-row">
                            <span>Status:</span>
                            <span id="accelStatus" class="status-badge">OK</span>
                        </div>
                        <div class="status-row">
                            <span>Sample Rate:</span>
                            <span id="accelRate">100 Hz</span>
                        </div>
                        <div class="status-row">
                            <span>Range:</span>
                            <span id="accelRange">¬±2g</span>
                        </div>
                        <div class="status-row">
                            <span>Calibration:</span>
                            <span id="accelCal">Calibrated</span>
                        </div>
                    </div>

                    <div class="status-card full-width">
                        <h3>Storage</h3>
                        <div class="storage-info">
                            <div class="storage-bar">
                                <div class="storage-used" id="storageBar" style="width: 35%"></div>
                            </div>
                            <div class="storage-text">
                                <span id="storageUsed">350 MB</span> / <span id="storageTotal">1 GB</span>
                            </div>
                        </div>
                        <div class="status-row">
                            <span>Sessions Stored:</span>
                            <span id="sessionsStored">12</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gauges Tab -->
            <div class="tab-content" id="gauges">
                <div class="gauges-grid">
                    <div class="gauge-container">
                        <canvas id="speedGauge"></canvas>
                        <p class="gauge-label">Speed (MPH)</p>
                    </div>
                    <div class="gauge-container">
                        <canvas id="rpmGauge"></canvas>
                        <p class="gauge-label">Engine RPM</p>
                    </div>
                    <div class="gauge-container">
                        <canvas id="tempGauge"></canvas>
                        <p class="gauge-label">Coolant Temp (¬∞F)</p>
                    </div>
                    <div class="gauge-container">
                        <canvas id="oilPressureGauge"></canvas>
                        <p class="gauge-label">Oil Pressure (PSI)</p>
                    </div>
                    <div class="gauge-container">
                        <canvas id="boostGauge"></canvas>
                        <p class="gauge-label">Boost (PSI)</p>
                    </div>
                    <div class="gauge-container">
                        <canvas id="throttleGauge"></canvas>
                        <p class="gauge-label">Throttle Position (%)</p>
                    </div>
                </div>
            </div>

            <!-- G-Force Tab -->
            <div class="tab-content" id="gforce">
                <div class="gforce-layout">
                    <div class="gforce-display">
                        <canvas id="gforceCanvas"></canvas>
                    </div>
                    <div class="gforce-stats">
                        <div class="stat-card">
                            <h3>Current G-Forces</h3>
                            <div class="gforce-reading">
                                <span class="gforce-label">Lateral:</span>
                                <span class="gforce-value" id="gforceLat">0.00g</span>
                            </div>
                            <div class="gforce-reading">
                                <span class="gforce-label">Longitudinal:</span>
                                <span class="gforce-value" id="gforceLong">0.00g</span>
                            </div>
                            <div class="gforce-reading">
                                <span class="gforce-label">Vertical:</span>
                                <span class="gforce-value" id="gforceVert">1.00g</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <h3>Peak G-Forces (Session)</h3>
                            <div class="gforce-reading">
                                <span class="gforce-label">Max Acceleration:</span>
                                <span class="gforce-value" id="maxAccel">0.00g</span>
                            </div>
                            <div class="gforce-reading">
                                <span class="gforce-label">Max Braking:</span>
                                <span class="gforce-value" id="maxBrake">0.00g</span>
                            </div>
                            <div class="gforce-reading">
                                <span class="gforce-label">Max Cornering:</span>
                                <span class="gforce-value" id="maxCorner">0.00g</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GPS Tab -->
            <div class="tab-content" id="gps">
                <div class="gps-layout">
                    <div class="gps-map">
                        <canvas id="gpsCanvas"></canvas>
                    </div>
                    <div class="gps-info">
                        <div class="info-card">
                            <h3>Position</h3>
                            <div class="gps-data">
                                <span>Latitude:</span>
                                <span id="gpsLat">--</span>
                            </div>
                            <div class="gps-data">
                                <span>Longitude:</span>
                                <span id="gpsLon">--</span>
                            </div>
                            <div class="gps-data">
                                <span>Altitude:</span>
                                <span id="gpsAlt">--</span>
                            </div>
                            <div class="gps-data">
                                <span>Heading:</span>
                                <span id="gpsHeading">--</span>
                            </div>
                        </div>
                        <div class="info-card">
                            <h3>Speed</h3>
                            <div class="gps-data">
                                <span>Ground Speed:</span>
                                <span id="gpsSpeed">-- MPH</span>
                            </div>
                            <div class="gps-data">
                                <span>Max Speed:</span>
                                <span id="gpsMaxSpeed">-- MPH</span>
                            </div>
                        </div>
                        <div class="info-card">
                            <h3>Satellite Info</h3>
                            <div id="satList" class="satellite-list">
                                <!-- Dynamically populated -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sessions Tab -->
            <div class="tab-content" id="sessions">
                <div class="sessions-header">
                    <h2>Recorded Sessions</h2>
                    <div class="session-controls">
                        <button class="btn btn-primary" id="startSession">
                            <span id="sessionButtonText">Start Recording</span>
                        </button>
                        <button class="btn btn-secondary" id="exportSessions">Export All</button>
                    </div>
                </div>
                <div class="sessions-list" id="sessionsList">
                    <!-- Dynamically populated with session cards -->
                </div>
            </div>

            <!-- Config Tab -->
            <div class="tab-content" id="config">
                <div class="config-sections">
                    <div class="config-card">
                        <h3>General Settings</h3>
                        <div class="config-row">
                            <label for="deviceName">Device Name:</label>
                            <input type="text" id="deviceName" value="OpenPonyLogger-01">
                        </div>
                        <div class="config-row">
                            <label for="timezone">Timezone:</label>
                            <select id="timezone">
                                <option value="America/New_York">Eastern Time</option>
                                <option value="America/Chicago">Central Time</option>
                                <option value="America/Denver">Mountain Time</option>
                                <option value="America/Los_Angeles">Pacific Time</option>
                            </select>
                        </div>
                        <div class="config-row">
                            <label for="units">Units:</label>
                            <select id="units">
                                <option value="imperial">Imperial (MPH, ¬∞F)</option>
                                <option value="metric">Metric (KPH, ¬∞C)</option>
                            </select>
                        </div>
                    </div>

                    <div class="config-card">
                        <h3>Data Logging</h3>
                        <div class="config-row">
                            <label for="sampleRate">Sample Rate:</label>
                            <select id="sampleRate">
                                <option value="10">10 Hz</option>
                                <option value="20">20 Hz</option>
                                <option value="50">50 Hz</option>
                                <option value="100" selected>100 Hz</option>
                            </select>
                        </div>
                        <div class="config-row checkbox-row">
                            <input type="checkbox" id="autoRecord" checked>
                            <label for="autoRecord">Auto-start recording when moving</label>
                        </div>
                        <div class="config-row checkbox-row">
                            <input type="checkbox" id="recordGPS" checked>
                            <label for="recordGPS">Record GPS data</label>
                        </div>
                        <div class="config-row checkbox-row">
                            <input type="checkbox" id="recordAccel" checked>
                            <label for="recordAccel">Record accelerometer data</label>
                        </div>
                    </div>

                    <div class="config-card">
                        <h3>WiFi Configuration</h3>
                        <div class="config-row">
                            <label for="wifiMode">Mode:</label>
                            <select id="wifiMode">
                                <option value="ap">Access Point</option>
                                <option value="client">Client</option>
                            </select>
                        </div>
                        <div class="config-row">
                            <label for="wifiSSID">SSID:</label>
                            <input type="text" id="wifiSSID" value="OpenPonyLogger">
                        </div>
                        <div class="config-row">
                            <label for="wifiPassword">Password:</label>
                            <input type="password" id="wifiPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        </div>
                    </div>

                    <div class="config-card">
                        <h3>OBD-II Settings</h3>
                        <div class="config-row">
                            <label for="obdProtocol">Protocol:</label>
                            <select id="obdProtocol">
                                <option value="auto" selected>Auto-detect</option>
                                <option value="ISO15765-4_CAN">CAN (ISO 15765-4)</option>
                                <option value="ISO9141-2">ISO 9141-2</option>
                                <option value="ISO14230-4">ISO 14230-4 (KWP)</option>
                            </select>
                        </div>
                        <div class="config-row">
                            <label for="obdTimeout">Timeout (ms):</label>
                            <input type="number" id="obdTimeout" value="200" min="100" max="1000" step="50">
                        </div>
                    </div>

                    <div class="config-card">
                        <h3>Display Settings</h3>
                        <div class="config-row checkbox-row">
                            <input type="checkbox" id="darkMode" checked>
                            <label for="darkMode">Dark Mode</label>
                        </div>
                        <div class="config-row">
                            <label for="brightness">Screen Brightness:</label>
                            <input type="range" id="brightness" min="10" max="100" value="80">
                            <span id="brightnessValue">80%</span>
                        </div>
                    </div>

                    <div class="config-actions">
                        <button class="btn btn-primary" id="saveConfig">Save Configuration</button>
                        <button class="btn btn-secondary" id="resetConfig">Reset to Defaults</button>
                        <button class="btn btn-danger" id="factoryReset">Factory Reset</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
